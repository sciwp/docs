(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{126:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return u}));var n=a(1),r=a(6),o=(a(0),a(135)),c={id:"framework-route-manager",title:"Routes",sidebar_label:"Routes"},s={id:"framework-route-manager",title:"Routes",description:"With Sciwp you can define routes in the same way you would define them with any other framework. The routes usually match a file, a function or a controller's class method, which is in charge of parsing the incoming data and provide a response.\r",source:"@site/docs\\route-manager.md",permalink:"/docs/framework-route-manager",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/route-manager.md",sidebar_label:"Routes",sidebar:"someSidebar",previous:{title:"Plugins",permalink:"/docs/framework-plugin-manager"},next:{title:"Rest Routes",permalink:"/docs/framework-rest-manager"}},i=[{value:"Creating Routes",id:"creating-routes",children:[{value:"Request method",id:"request-method",children:[]},{value:"Route expression",id:"route-expression",children:[]},{value:"Route Actions",id:"route-actions",children:[]}]},{value:"Request Methods",id:"request-methods",children:[{value:"Get Method",id:"get-method",children:[]},{value:"Post Method",id:"post-method",children:[]},{value:"Put Method",id:"put-method",children:[]},{value:"Patch Method",id:"patch-method",children:[]},{value:"Delete Method",id:"delete-method",children:[]},{value:"Options Method",id:"options-method",children:[]}]},{value:"Where Restrictions",id:"where-restrictions",children:[{value:"Single Clause",id:"single-clause",children:[]},{value:"Multiple Clauses",id:"multiple-clauses",children:[]}]},{value:"Registering Routes",id:"registering-routes",children:[]},{value:"Route Configuration",id:"route-configuration",children:[{value:"Layout Options",id:"layout-options",children:[]},{value:"Sync/Async Routes",id:"syncasync-routes",children:[]}]},{value:"Route Manager",id:"route-manager",children:[]}],l={rightToc:i};function u(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"With Sciwp you can define routes in the same way you would define them with any other framework. The routes usually match a file, a function or a controller's class method, which is in charge of parsing the incoming data and provide a response."),Object(o.b)("p",null,"Routes can answer to one or many REST methods, returning just a standard HTTP response, wether synchronous or asynchronous."),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class stores all data needed for a route definition, including the route expression, the parameters and matching action that will be executed with the defined parameters when the browser route matches the specified route."),Object(o.b)("h2",{id:"creating-routes"},"Creating Routes"),Object(o.b)("p",null,"To create a new route you can just use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"create"))," static method  of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class.  The create method accepts the following parameters:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"method (string|array)"),": This is the request method for this route. You can specify ",Object(o.b)("inlineCode",{parentName:"p"},"'get'"),", ",Object(o.b)("inlineCode",{parentName:"p"},"'post'"),", ",Object(o.b)("inlineCode",{parentName:"p"},"'put'"),", ",Object(o.b)("inlineCode",{parentName:"p"},"'patch'"),", ",Object(o.b)("inlineCode",{parentName:"p"},"'delete'")," and ",Object(o.b)("inlineCode",{parentName:"p"},"'options'")," as values for this parameter. You can also specify an array of values in case you want the route to answer more than one method. If you want the route to answer all HTTP methods, just use ",Object(o.b)("inlineCode",{parentName:"p"},"'any'"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"route (string)"),": This is the route definition, which is relative to the web domain. You can specify parameters between braces. You will then be able to use these parameters in the function or controller method defined as the action. It's possible to specify restrinctions for these parameters if you write a vertical bar just after the last character of the parameter name, followed by a regular expression.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"action (mixed)"),": This is the function, class method or file which will be called when the request matches the route expression. You can specify files, callback functions and class methods."))),Object(o.b)("p",null,"Here is an example of how to create a route using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"create"))," static method:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\nuse MyPlugin\\App\\Models\\Article;\n\nRoute::create('get', '/news/{permalink}', function($permalink) {\n  # Getting the article from the database\n  $article = Article::find($permalink);\n});\n")),Object(o.b)("h3",{id:"request-method"},"Request method"),Object(o.b)("p",null,"When creating a route, the first parameter indicates the request method, which can be ",Object(o.b)("strong",{parentName:"p"},"get"),", ",Object(o.b)("strong",{parentName:"p"},"post"),", ",Object(o.b)("strong",{parentName:"p"},"put"),", ",Object(o.b)("strong",{parentName:"p"},"patch"),", ",Object(o.b)("strong",{parentName:"p"},"delete")," or ",Object(o.b)("strong",{parentName:"p"},"options"),". You can also specify an ",Object(o.b)("strong",{parentName:"p"},"array of request methods")," so the endpoint answers to more than one methods, or use ",Object(o.b)("strong",{parentName:"p"},"any")," for the endpoint to answer all request methods."),Object(o.b)("p",null,"For example, if you want to specify a route which will call a function in charge of deleting a news article, the route might be the next one:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\nuse MyPlugin\\App\\Models\\Article;\n\nRoute::create('delete', '/news/{permalink}', function($permalink) {\n  # Getting an article from the database\n  $article = Article::findOne('permalink', $permalink);\n\n  # Deleting the article\n  $article->remove();\n});\n")),Object(o.b)("h3",{id:"route-expression"},"Route expression"),Object(o.b)("p",null,"When creating a route using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"create"))," static method of the Route class, you must specify the matching route using the second parameter. You can specify static routes or add different parameters. "),Object(o.b)("h4",{id:"creating-a-static-route"},"Creating a Static Route"),Object(o.b)("p",null,"Static routes have no parameters. Here is an example of a static route which will answer to the request ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"/news")),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/news', function() { /*... */ });\n")),Object(o.b)("h4",{id:"creating-a-dynamic-route"},"Creating a Dynamic Route"),Object(o.b)("p",null,"You can specify dynamic parameters or variables between braces. The next example will answer to the get requests ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"/cars/seat")),", ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"/cars/ford"))," and ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"/cars/any-model")),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{model}', function($model) { /*... */ });\n")),Object(o.b)("p",null,"You can add all parameters you want:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model}', function($make, $model) { /*... */ });\n")),Object(o.b)("h4",{id:"creating-a-route-with-optional-parameters"},"Creating a Route With Optional Parameters"),Object(o.b)("p",null,"To make a parameter optional, just append a question mark after it. In the next example, the route will answer to both the requests ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"/cars"))," and ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"/cars/any-car")),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n# If the model is not set, it will default to false\nRoute::create('get', '/cars/{model?}', function($model = false) { /*... */ });\n")),Object(o.b)("h4",{id:"parameter-restrictions"},"Parameter Restrictions"),Object(o.b)("p",null,"It's also possible to set some conditions for the specified parameters in the route definitions using a regular expression. For example, you might want to limit the format of the parameter to the letters which go from ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"a"))," to ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"z"))," and also limit the parameter to 10 characters length. To do so, you would write the regular expression after the parameter name, separated with a vertical bar:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{model|[a-z]{10}}', function($model) { /*... */ });\n")),Object(o.b)("h4",{id:"parameter-restrictions-with-a-where-clause"},"Parameter Restrictions with a Where Clause"),Object(o.b)("p",null,"Another way to define parameter requirements is to use a where clause after the route definition, so the previous example is equivalent to this one:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n$routeManager->route('get', '/cars/{make}',  function($model) { /*... */ })->where('make', '[a-z]{10}');\n")),Object(o.b)("p",null,"You also specify additional where clauses:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model}', function($model, $model) { /*... */ })->where('make', '[a-z]{10}')->where('model', '[a-z0-9]{10}');\n")),Object(o.b)("h3",{id:"route-actions"},"Route Actions"),Object(o.b)("p",null,"The action is the third parameter you need to create a route, and is the function or method which will be executed. You can specify a function, a method or a file to include."),Object(o.b)("h4",{id:"using-a-function-as-an-action"},"Using a Function as an Action"),Object(o.b)("p",null,"This is the action type of the previous examples. If you want the route to use a function, you can add in in this way:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model}', function($make, $model) {\n  echo('Make: ' . $make . ' | Model: ' . $model);\n});\n")),Object(o.b)("p",null,"You can also define ",Object(o.b)("strong",{parentName:"p"},"default values")," for the parameters. If a parameter is optional, don't forget to specify a default value for it in the function definition:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model?}', function($make, $model = 'general') {\n  echo('Make: ' . $make . ' | Model: ' . $model);\n});\n")),Object(o.b)("p",null,"Although is not common when using spare functions, it's also possible to ",Object(o.b)("strong",{parentName:"p"},"inject dependencies"),". An instance of the dependency will be created and sent to the defined function as an argument:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\nuse MyPlugin\\App\\Services\\Link;\n\nRoute::create('get', '/news/{permalink}', function($permalink, Link $link)) {\n  echo('News Permalink: ' . $permalink);\n});\n")),Object(o.b)("h4",{id:"using-a-method-as-an-action"},"Using a Method as an Action"),Object(o.b)("p",null,"You can specify a class method formatted as ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"class@method")),". You can use the request object to get the parameters or specify them in the definition of the class method."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model}', 'MyPlugin\\App\\Controller\\Cars@showCar');\n")),Object(o.b)("p",null,"In the previous example, a new instance of the class ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Cars"))," will be created when a user access the matching route, and the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"showCar"))," method will be called on that instance. A new instance of the specified class will always be created unless the singleton pattern is used. As in the case of functions, you need to define the matching route parameters you want get get into the controller method definition."),Object(o.b)("p",null,"You can inject dependencies into the controller constructor. This is can example of how you can define dependencies:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace  MyPlugin\\App\\Controllers;\n\nuse MyPlugin\\App\\Services\\Cars;\n\nclass Cars\n{\n  private $carsService;\n  \n  public function __construct(Cars $carsService)\n  {\n    $this->carsService = $carsService;\n  }\n  \n  public function showCar($make, $model)\n  {\n    $car = $this->carsService->getCar($make, $model);\n\n    if ($car) echo('My car is a:' . $car->make . ' ' . $car->model);\n    else echo('The requested car does not exist');\n  }    \n}\n")),Object(o.b)("p",null,"If you call a ",Object(o.b)("strong",{parentName:"p"},"static method")," using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"class@method"))," action format, a the new instance will be created in any case."),Object(o.b)("h4",{id:"using-a-static-method-as-an-action"},"Using a Static Method as an Action"),Object(o.b)("p",null,"If you just want to execute a ",Object(o.b)("strong",{parentName:"p"},"static method")," of a class without creating a new instance, you can define the action using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"class::method"))," format. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model}', 'MyPlugin\\App\\Controller\\Cars::showCarStatic');\n")),Object(o.b)("p",null,"Please note that the actions defined with the form ",Object(o.b)("em",{parentName:"p"},"class::method")," just work when referencing a static method. No class instance will be created."),Object(o.b)("h4",{id:"using-a-file-as-an-action"},"Using a File as an Action"),Object(o.b)("p",null,"It's also possible to use use a file as an action. When a user access the matching route, the the specified file will be include. You must specify the full path of the file. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\nuse MyPlugin\\Sci\\Manager\\PluginManager;\n\n$myPlugin = PluginManager::instance()->get('myplugin');\n\nRoute::create('get', '/cars/{make}/{model}', $myPlugin->getDir() . '/app/files/actionFile.php');\n")),Object(o.b)("h2",{id:"request-methods"},"Request Methods"),Object(o.b)("p",null,"The Route class includes short methods for the available HTTP request methods so you don't need to use this parameter, writing less code. You can match all available request methods using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"any"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::any('/cars', 'MyPlugin\\App\\Controllers\\Cars@getCar');\n")),Object(o.b)("p",null,"The ",Object(o.b)("em",{parentName:"p"},"getCar")," method of the ",Object(o.b)("em",{parentName:"p"},"Cars")," class will be called regardless of the request method. it's also possible to specify a specific method using one of the specific methods."),Object(o.b)("h3",{id:"get-method"},"Get Method"),Object(o.b)("p",null,"You can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"get"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class to create a GET endpoint. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::get('/cars', 'MyPlugin\\App\\Controllers\\Cars@getCar');\n")),Object(o.b)("h3",{id:"post-method"},"Post Method"),Object(o.b)("p",null,"You can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"post"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class to create a POST endpoint. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::post('/cars', 'MyPlugin\\App\\Controllers\\Cars@createCar');\n")),Object(o.b)("h3",{id:"put-method"},"Put Method"),Object(o.b)("p",null,"You can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"put"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class to create a PUT endpoint. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::get('/cars/{carId}', 'MyPlugin\\App\\Controllers\\Cars@updateCar');\n")),Object(o.b)("h3",{id:"patch-method"},"Patch Method"),Object(o.b)("p",null,"You can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"patch"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class to create a PATCH endpoint. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::get('/cars/{carId}', 'MyPlugin\\App\\Controllers\\Cars@patchCar');\n")),Object(o.b)("h3",{id:"delete-method"},"Delete Method"),Object(o.b)("p",null,"You can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"delete"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class to create a DELETE endpoint. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::get('/cars/{carId}', 'MyPlugin\\App\\Controllers\\Cars@deleteCar');\n")),Object(o.b)("h3",{id:"options-method"},"Options Method"),Object(o.b)("p",null,"You can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"options"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Sci\\Route"))," class to create a OPTIONS endpoint. Here is an example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::get('/cars', 'MyPlugin\\App\\Controllers\\Cars@getOptions');\n")),Object(o.b)("h2",{id:"where-restrictions"},"Where Restrictions"),Object(o.b)("p",null,"When creating a route it's possible to specify parameter restrictions usin a where clause."),Object(o.b)("h3",{id:"single-clause"},"Single Clause"),Object(o.b)("p",null,"which includes the next parameters:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"parameterName (string)"),": The parameter that you want to apply the restriction."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"regularExpression (mixed)"),": The regular expression.")),Object(o.b)("p",null,"In the next example we restrict the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"make"))," parameter to include just characters in the range ",Object(o.b)("em",{parentName:"p"},"a-z")," and we also limit the parameter length to have from ",Object(o.b)("em",{parentName:"p"},"1")," to ",Object(o.b)("em",{parentName:"p"},"10")," characters:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}', 'MyPlugin\\App\\Controller\\Cars@view')->where('make', '[a-z]{1,10}');\n")),Object(o.b)("h3",{id:"multiple-clauses"},"Multiple Clauses"),Object(o.b)("p",null,"It's also possible to concatenate many where clauses as long as they make reference to different parameters:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\nRoute::create('get', '/cars/{make}/{model}', 'MyPlugin\\App\\Controller\\Cars@view')->where('make', '[a-z]{10}')->where('model', '[a-z0-9]{1,10}');\n")),Object(o.b)("p",null,"Or you can also write it in this way to avoid long lines of code:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n$myRoute = Route::create('get', '/cars/{make}/{model}', 'MyPlugin\\App\\Controller\\Cars@view');\n$myRoute->where('make', '[a-z]{10}');\n$myRoute->where('model', '[a-z0-9]{1,10}');\n")),Object(o.b)("p",null,"The ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"where"))," method also accepts an array of where clauses formatted as ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"'parameter' => $expression")),", so the previous code could be rewritten in this way:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n$myRoute = Route::create('get', '/cars/{make}/{model}', 'MyPlugin\\App\\Controller\\Cars@view');\n$myRoute->where(['make' => '[a-z]{10}', 'model' => '[a-z0-9]{1,10}']);\n")),Object(o.b)("h2",{id:"registering-routes"},"Registering Routes"),Object(o.b)("p",null,"It's not enough to create routes. Before you are able to access them, route instances must be registered into the Route Manager. The ",Object(o.b)("strong",{parentName:"p"},"\\Sci\\Route")," class already includes the hability to interact with the Route Manager, so to register a route you just need to call the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"register"))," method. The ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"register"))," method accepts the following parameters:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"routeId (string)"),": This is an optional parameter which will allow to easily retrieve routes from the Route Manager. It's useful when you want other plugin creators to extend your plugin.")),Object(o.b)("p",null,"Here is how you would create and register a route:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n# Create a new route and register the instance\nRoute::create('get', '/cars/{make}/{model}', 'MyPlugin\\App\\Controllers\\Car@showCar')->register('car_model');\n")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Explanation"),": The ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"create"))," static method returns a ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Route"))," instance, so it's possible to use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"register"))," method with the output."),Object(o.b)("h2",{id:"route-configuration"},"Route Configuration"),Object(o.b)("h3",{id:"layout-options"},"Layout Options"),Object(o.b)("p",null,"Routes can be configured so the WordPress header and footer is included or excluded. The header and the footer are included by default. To configure the layout you can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"layout"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Route"))," class. The layout method accepts the following parameter:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"value (boolean)"),": Set it to true to include both the header and the footer.")),Object(o.b)("p",null,"The next route will include both the WordPress header and the footer:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n$myRoute = Route::create('get', '/blog/{permalink}', 'MyPlugin\\App\\Controller\\Blog@view');\n$myRoute->layout(true)->register();\n\n")),Object(o.b)("p",null,"Use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"layout"))," method with a ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"false"))," value to exclude both the WordPress header and footer:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n$myRoute = Route::create('get', '/blog/{permalink}', 'MyPlugin\\App\\Controller\\Blog@view');\n$myRoute->layout(false)->register();\n\n")),Object(o.b)("h3",{id:"syncasync-routes"},"Sync/Async Routes"),Object(o.b)("p",null,"Routes are configured by default as synchronous, so they just answer to synchronous requests. You can configure this behaviour by using the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"async"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"Route"))," class. The async method accepts the following parameter:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"value (boolean)"),": Set it to true for the route to accept asynchronous AJAX requests. Set it to false to accept only synchronous requests.")),Object(o.b)("p",null,"Here is an example of an asynchronous route:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"\nnamespace MyPlugin;\n\nuse MyPlugin\\Sci\\Route;\n\n$myRoute = Route::create('get', '/blog/{permalink}', 'MyPlugin\\App\\Controller\\Blog@view');\n$myRoute->async(true)->register();\n\n")),Object(o.b)("h2",{id:"route-manager"},"Route Manager"),Object(o.b)("p",null,"When you register a route, is registered into the route manager, which is in charge of adding the new permalink structures to WordPress and clearing the permalink cache. The Route Manager is shared among all plugins using SCIWP. To get the Route Manager you just need to get the already created instance."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"use MyPlugin\\Sci\\Manager\\RouteManager;\n\n$routeManager = RouteManager::instance();\n")),Object(o.b)("p",null,"If you have already created a route, you can use the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"register"))," method of the  ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"MyPlugin\\Sci\\Route"))," class or also the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"register"))," method of the ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("em",{parentName:"strong"},"MyPlugin\\Sci\\Manager\\RouteManager"))," class to register it into the ",Object(o.b)("strong",{parentName:"p"},"Route Manager"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-php"}),"use MyPlugin\\Sci\\Manager\\RouteManager;\nuse MyPlugin\\Sci\\Route;\n\n$myRoute = Route::create('get', '/blog/{permalink}', 'MyPlugin\\App\\Controller\\Blog@view');\n\n$routeManager = RouteManager::instance();\n$routeManager->register($myRoute);\n")),Object(o.b)("p",null,"And this has covered all aspects related to the Route Manager."))}u.isMDXComponent=!0},135:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s({},t,{},e)),a},p=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=u(a),m=n,h=p["".concat(c,".").concat(m)]||p[m]||b[m]||o;return a?r.a.createElement(h,s({ref:t},l,{components:a})):r.a.createElement(h,s({ref:t},l))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,c=new Array(o);c[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:n,c[1]=s;for(var l=2;l<o;l++)c[l]=a[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);