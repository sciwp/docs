(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{130:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return g})),n.d(t,"default",(function(){return s}));var a=n(1),r=n(6),i=(n(0),n(135)),l={id:"framework-plugin-manager",title:"Plugins",sidebar_label:"Plugins"},o={id:"framework-plugin-manager",title:"Plugins",description:"The Plugin Manager **_Sci\\Manager\\PluginManager_**, is the component used by the framework to manage the plugins. All plugin instances created should be registered within the PluginManager.\r",source:"@site/docs\\plugin-manager.md",permalink:"/docs/framework-plugin-manager",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/plugin-manager.md",sidebar_label:"Plugins",sidebar:"someSidebar",previous:{title:"Dependencies",permalink:"/docs/framework-dependencies"},next:{title:"Routes",permalink:"/docs/framework-route-manager"}},g=[{value:"Creating Plugins",id:"creating-plugins",children:[]},{value:"Registering Plugins",id:"registering-plugins",children:[]},{value:"Plugin Methods",id:"plugin-methods",children:[{value:"getName Method",id:"getname-method",children:[]},{value:"getNamespace Method",id:"getnamespace-method",children:[]},{value:"getDir Method",id:"getdir-method",children:[]},{value:"getMainDir Method",id:"getmaindir-method",children:[]},{value:"getModulesDir Method",id:"getmodulesdir-method",children:[]},{value:"getFile Method",id:"getfile-method",children:[]},{value:"getMetaField Method",id:"getmetafield-method",children:[]}]},{value:"Plugin Manager",id:"plugin-manager",children:[{value:"Registering a Plugin",id:"registering-a-plugin",children:[]},{value:"Getting a Single Plugin",id:"getting-a-single-plugin",children:[]},{value:"Getting All Plugins",id:"getting-all-plugins",children:[]}]}],c={rightToc:g};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The Plugin Manager ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"Sci\\Manager\\PluginManager")),", is the component used by the framework to manage the plugins. All plugin instances created should be registered within the PluginManager."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Why"),": The Plugin Manager will link the Plugin objects to other framework components, like the ",Object(i.b)("strong",{parentName:"p"},"autoloader"),"."),Object(i.b)("p",null,"The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"Sci\\Plugin"))," class stores required plugin information and accepts a set of services whose purpose is to extend WordPress default plugin functionalities."),Object(i.b)("h2",{id:"creating-plugins"},"Creating Plugins"),Object(i.b)("p",null,"To create a new instance of the Plugin class, you just need to call the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"create"))," static method. The create method accepts the following parameters:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"pluginFile (string)"),": The absolute path to the plugin main file, where the meta data of the plugin is defined. This field is required.")),Object(i.b)("p",null,"Here is an example where we create a new instance in the main plugin file:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\n# Create a new plugin\nSci\\Plugin::create(__FILE__);\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Explanation"),": Begind the curtains, the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"create"))," method creates a new instance of the Plugin class using the Sci class ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"make"))," method, which will inject required dependences. So, the above code is equivalent to this uglier one:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\n# Masochist version of the above method\nSci::make(Sci\\Plugin::class, [__FILE__]);\n")),Object(i.b)("h2",{id:"registering-plugins"},"Registering Plugins"),Object(i.b)("p",null,"It's nice to create a Plugin instance, but you need to add it to the ",Object(i.b)("strong",{parentName:"p"},"Plugin Manager")," so you can autoload the classes defined inside it. For simplicity, the ",Object(i.b)("strong",{parentName:"p"},"\\Sci\\Plugin")," class already includes the hability to interact with the Plugin Manager, so to register a plugin you just need to call the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"register"))," method. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"register"))," method accepts the following parameters:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"pluginId (string)"),": An identificator which allows the Plugin Manager to retrieve any registered plugin. If no identificator is specified, the lowercased directory name of the plugin will be used instead. In this last case, spaces are replaced by hyphens.")),Object(i.b)("p",null,"Here is how you would create and register a plugin:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\n# Create a new plugin and register the instance\n$myPlugin = Sci\\Plugin::create(__FILE__)->register('myplugin');\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Explanation"),": The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"create"))," static method returns a ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"Plugin"))," instance, so it's possible to use the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"register"))," method with the output."),Object(i.b)("h2",{id:"plugin-methods"},"Plugin Methods"),Object(i.b)("p",null,"The Plasss includes some helpful methods to get plugin information. Here are some of them:"),Object(i.b)("h3",{id:"getname-method"},"getName Method"),Object(i.b)("p",null,"This method allow to get the plugin name. It will return the name configured in the public configuration file or, if not present, the name configured in the WordPress plugin metda. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getName"))," method accepts no parameters. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the plugin name\n$myPlugin->getName();\n")),Object(i.b)("h3",{id:"getnamespace-method"},"getNamespace Method"),Object(i.b)("p",null,"This method returns the configured plugin namespace. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getNamespace"))," method accepts no parameters. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the plugin namespace\n$myPlugin->getNamespace();\n")),Object(i.b)("h3",{id:"getdir-method"},"getDir Method"),Object(i.b)("p",null,"This method allow to get the path to the root plugin directory path. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getDir"))," method accepts no parameters. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the plugin directory\n$myPlugin->getDir();\n")),Object(i.b)("h3",{id:"getmaindir-method"},"getMainDir Method"),Object(i.b)("p",null,"The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getMainDir"))," method allows to get the path to the main plugin directory, which is where you usually place your code. It's the ",Object(i.b)("inlineCode",{parentName:"p"},"myplugin/app")," directory by default. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the path to the main directory\n$myPlugin->getMainDir();\n")),Object(i.b)("h3",{id:"getmodulesdir-method"},"getModulesDir Method"),Object(i.b)("p",null,"The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getModulesDir"))," method allows to get the path to the modules directory of the plugin. It's the ",Object(i.b)("inlineCode",{parentName:"p"},"myplugin/modules")," directory by default. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the path to the modules directory\n$myPlugin->getModulesDir();\n")),Object(i.b)("h3",{id:"getfile-method"},"getFile Method"),Object(i.b)("p",null,"This method allow to get the path to the main plugin file. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getFile"))," method accepts no parameters. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the plugin file\n$myPlugin->getFile();\n")),Object(i.b)("h3",{id:"getmetafield-method"},"getMetaField Method"),Object(i.b)("p",null,"This method returns the specified gield from the plugin meta data block. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"getMetaField"))," method accepts the following parameters:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"field (string)"),": The meta data field to get. If you look at the meta block in the main plugin file, the field matches the text which is before the column. here is an example:")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"# Returns the plugin author\n$myPlugin->getMetaField('Author');\n")),Object(i.b)("h2",{id:"plugin-manager"},"Plugin Manager"),Object(i.b)("p",null,"The Plugin Manager is a core component of the framework which is used to store the registed plugins. It contains the methods which allow to register plugin instances and get them."),Object(i.b)("h3",{id:"registering-a-plugin"},"Registering a Plugin"),Object(i.b)("p",null,"You will usually not use this method. However, if you have created a Plugin instance, you can register it at any time. In fact, the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"register"))," method of the Plugin class is just a shortcut to this method. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"register"))," method accepts the following parameters:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"plugin (MyPlugin\\Sci\\Plugin)"),": The Plugin instance.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"pluginId (string)"),": An identificator which allows the Plugin Manager to retrieve any registered plugin. If no identificator is specified, the lowercased directory name of the plugin will be used instead. In this last case, spaces are replaced by hyphens."))),Object(i.b)("p",null,"Here is how you would register an existing plugin:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse \\MyPlugin\\Sci\\Plugin;\nuse \\MyPlugin\\Sci\\Manager\\PluginManager;\n\n# Create a new plugin\n$myPlugin = Plugin::create(__FILE__);\n\n# Get the PluginManager instance\n$pluginManager = PluginManager::instance();\n\n# Register the plugin into the Plugin Manager\n$pluginManager->register($myPlugin, 'myplugin');\n\n")),Object(i.b)("h3",{id:"getting-a-single-plugin"},"Getting a Single Plugin"),Object(i.b)("p",null,"This method is useful when you want to get a plugin instance from your code, from another plugin or from a theme. The ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"get"))," method accepts the following parameters:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"pluginId (string)"),": The identificator used when registering the plugin. This parameter is optional. If the parameter is present, an array will all the plugins will be returned.")),Object(i.b)("p",null,"Here is an example of how you can get a registered plugin:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse \\MyPlugin\\Sci\\Manager\\PluginManager;\n\n# Get the PluginManager instance\n$pluginManager = PluginManager::instance();\n\n# Register the plugin into the Plugin Manager\n$myPlugin = $pluginManager->get('myplugin');\n\n")),Object(i.b)("p",null,"If no ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"pluginId"))," is provided, an array of plugins will be retrieved."),Object(i.b)("h3",{id:"getting-all-plugins"},"Getting All Plugins"),Object(i.b)("p",null,"To get all plugins you can use the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"get"))," method without parameters or you can use the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"all"))," method. This method has no parameters. Here is an example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-php"}),"namespace MyPlugin;\n\nuse \\MyPlugin\\Sci\\Manager\\PluginManager;\n\n# Get the PluginManager instance\n$pluginManager = PluginManager::instance();\n\n# Get an array with all the plugins\n$pluginsArr = $pluginManager->all();\n\n# Or you can also use the get method\n$pluginsArr = $pluginManager->get();\n\n# A single plugin\n$myPlugin = $pluginsArr['myplugin'];\n\n")))}s.isMDXComponent=!0},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),s=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},p=function(e){var t=s(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=g(e,["components","mdxType","originalType","parentName"]),p=s(n),b=a,m=p["".concat(l,".").concat(b)]||p[b]||u[b]||i;return n?r.a.createElement(m,o({ref:t},c,{components:n})):r.a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=b;var o={};for(var g in t)hasOwnProperty.call(t,g)&&(o[g]=t[g]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);